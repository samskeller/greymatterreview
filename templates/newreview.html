<!DOCTYPE HTML>
<html>
        <head>
                <title>The Grey Matter Review</title>
                <link rel="stylesheet" type="text/css" href="/stylesheets/greystyles.css"/>
                <!--Source of background image: http://cstpdx.com/show/specticast-concert-series-andr%C3%A9-rieu -->
                <script type="text/javascript" src="/scripts/jquery-1.9.1.min.js"></script>
        </head>
        <script>
        function albumSwitch(active, number) {  
      
    		for (var i=0; i < number; i++) {  
      			document.getElementById("searchresult_"+i).className = 'searchresult';  
    		}  
    		document.getElementById("searchresult_"+active).className = 'searchresultactive';  
    		
    		var artist = document.getElementById("searchresult_"+active).querySelector(".artistInReview").innerText;
    		var album = document.getElementById("searchresult_"+active).querySelector(".albumInReview").innerText;
    		
    		var hiddenArtist = document.querySelector("#artisthidden");
    		hiddenArtist.value = artist;
    		var hiddenAlbum = document.querySelector("#albumhidden");
    		hiddenAlbum.value = album;
      
		}
		
		function ratingSwitch(active) {
			var oldChosen = $("#ratingNumberChosen");
			if (oldChosen) {
				var oldChosenNumber = oldChosen.text();
				$("#ratingNumberChosen").attr("id", "rating" + oldChosenNumber);
			}
			var newChosenNumber = active.toString();
			$("#rating" + newChosenNumber).attr("id", "ratingNumberChosen");
			$("#rating").attr("value", newChosenNumber);
		}
		</script>
<body id="homebody">
	<div id="top">
		<div id="logoHolder">
			<a href="/"><span id="emptySpan"></span></a><img id="toplogo" src="/stylesheets/GMLOGO_grey.jpg" alt="Unknown Person" width=40 height=40>
		</div>
		<a id="logout" href="/logout">Logout</a>
	</div>
	<br>
	<div id="description">
		<a href="/" style="text-decoration:none;"><label id="website_title"><span id="emptySpan"></span>grey<br>matter</label></a>
	</div>
	<div id="mission">what do you have to say about music?</div>
	<br>
	<br>
	<div id="searchBar">
		<form method="post" action="/reviews">
		<input type="text" id="searchinput" placeholder="Search" name="searchinput">
		<select id="searchdropdown" name="searchdropdown" onChange="changeSearchParam(this.value);">
			<option value="artists">Artists</option>
			<option value="albums">Albums</option>
		</select>	
		<input type="submit" value="Find Artists" id="searchbtn" name="searchbtn">
		</form>
	</div>
	<form method="post" action="/newreview">
	<div id="maincontainer">
		<br>
		<label id="artistlabel">Enter the Album Name</label>
		<br>
		<input type="text" id="inputAlbum" name="inputAlbum"><input type="submit" id="artistlookupbtn" name="artistlookupbtn" value="Search">
		<br>
		{% if albums|length > 0: %}
			<label id="reviewlabel">Select an album</label>
			<br>
			<br>
			{% for album in albums: %}
				<div class="searchresult" id="searchresult_{{albums.index(album)}}"><a class="searchresulta" href="javascript:albumSwitch({{albums.index(album)}}, {{albums|length}});">
					<p>Artist: <span class="artistInReview">{{album['artist']}}</span></p>
					<p>Album: <span class="albumInReview">{{album['album']}}</span></p>
				</a></div>
			{% endfor %}
			<input type="hidden" name="artisthidden" id="artisthidden" value=""</input>
			<input type="hidden" name="albumhidden" id="albumhidden" value=""</input>
		{% elif errorMessage != "": %}
			<p>{{errorMessage}}</p>
		{% endif %}
		<br>
		<div id="ratingContainer">
			<label id="rateItLabel">Rate it</label>
			<br>
			<div id="ratingNumbers">
			<span class="ratingNumber" id="rating1" onclick="javascript:ratingSwitch(1);">1</span><br>
			<span class="ratingNumber" id="rating2" onclick="javascript:ratingSwitch(2);">2</span><br>
			<span class="ratingNumber" id="rating3" onclick="javascript:ratingSwitch(3);">3</span><br>
			<span class="ratingNumber" id="rating4" onclick="javascript:ratingSwitch(4);">4</span><br>
			<span class="ratingNumber" id="rating5" onclick="javascript:ratingSwitch(5);">5</span><br>
			<span class="ratingNumber" id="rating6" onclick="javascript:ratingSwitch(6);">6</span><br>
			<span class="ratingNumber" id="rating7" onclick="javascript:ratingSwitch(7);">7</span><br>
			<span class="ratingNumber" id="rating8" onclick="javascript:ratingSwitch(8);">8</span><br>
			<span class="ratingNumber" id="rating9" onclick="javascript:ratingSwitch(9);">9</span><br>
			<span class="ratingNumber" id="rating10" onclick="javascript:ratingSwitch(10);">10</span>
			<input type="hidden" name="rating" id="rating" value=""</input>
			</div>
		</div>
		<label id="reviewlabel">Type your review</label>
		<textarea id="reviewbody" name="reviewbody"></textarea>
		<input type="submit" name="newreviewbtn" id="newreviewbtn">
	</div>
	</form>
</body>
</html>
